---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroSection from '../components/HeroSection.astro';
import BookingButton from '../components/BookingButton.astro';
import FAQAccordion from '../components/FAQAccordion.astro';
---

<BaseLayout
  title="Contact Dr. Colin MacLeod ND"
  description="Contact Dr. Colin MacLeod, Bedford Naturopathic Doctor. Ask questions about natural health treatments, IV therapy, prolotherapy and naturopathic medicine."
  focusKeyword="contact Bedford naturopathic doctor"
>
  <HeroSection title="Contact Dr. Colin MacLeod ND" centered compact>
    Have questions about naturopathic medicine or want to learn if our treatments are right for you? Get in touch with our Bedford practice.
  </HeroSection>

  <!-- Contact Options -->
  <section class="py-16 lg:py-24 bg-white">
    <div class="section-shell">
      <div class="grid lg:grid-cols-2 gap-12">
        
        <!-- Contact Form -->
        <div>
          <h2 class="text-3xl sm:text-4xl font-serif font-bold text-emerald-950 mb-6">Send Us a Message</h2>
          <p class="text-gray-600 mb-8">
            Use this form to ask questions about treatments, scheduling or general inquiries. We'll respond within 1-2 business days.
          </p>
          
          <form
            id="contact-form"
            class="space-y-6"
          >
            <!-- Web3Forms access key - get yours free at web3forms.com -->
            <input type="hidden" name="access_key" value="77afa6a0-adee-4b16-ac00-52b5472b2fdd">
            <input type="hidden" name="subject" value="New Contact Form Submission - drcolinmacleod.com">
            <input type="hidden" name="from_name" value="Dr. Colin MacLeod Website">
            <!-- Name -->
            <div>
              <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
                Name <span class="text-red-600" aria-hidden="true">*</span>
                <span class="sr-only">(required)</span>
              </label>
              <input
                type="text"
                id="name"
                name="name"
                required
                aria-required="true"
                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 focus:border-transparent"
              >
            </div>

            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                Email Address <span class="text-red-600" aria-hidden="true">*</span>
                <span class="sr-only">(required)</span>
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                aria-required="true"
                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 focus:border-transparent"
              >
            </div>

            <!-- Message -->
            <div>
              <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
                Message <span class="text-red-600" aria-hidden="true">*</span>
                <span class="sr-only">(required)</span>
              </label>
              <textarea
                id="message"
                name="message"
                rows="5"
                required
                aria-required="true"
                placeholder="Please provide details about your question or health concern..."
                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 focus:border-transparent resize-vertical"
              ></textarea>
            </div>

            <!-- Privacy Notice -->
            <div class="bg-gray-50 p-4 rounded-lg">
              <label for="privacy" class="flex items-start cursor-pointer group">
                <span class="flex items-center justify-center w-6 h-6 mr-3 mt-0.5 flex-shrink-0">
                  <input
                    type="checkbox"
                    id="privacy"
                    name="privacy"
                    required
                    aria-required="true"
                    class="w-5 h-5 text-emerald-600 focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 border-gray-300 rounded cursor-pointer"
                  >
                </span>
                <span class="text-sm text-gray-600 group-hover:text-gray-800">
                  I understand that this form is for general inquiries only and not for medical emergencies. Any health information shared will be kept confidential and used only to provide appropriate resources and scheduling information. <span class="text-red-600" aria-hidden="true">*</span>
                  <span class="sr-only">(required)</span>
                </span>
              </label>
            </div>

            <!-- Honeypot: hidden from real users, traps bots -->
            <div aria-hidden="true" style="display:none;">
              <input type="text" name="_gotcha" tabindex="-1" autocomplete="off">
            </div>

            <!-- Submit Button -->
            <div>
              <button 
                type="submit" 
                id="submit-btn"
                class="w-full bg-emerald-900 text-white py-3 px-6 rounded-full font-semibold hover:bg-emerald-800 hover:-translate-y-0.5 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2"
              >
                <span id="submit-text">Send Message</span>
                <span id="submit-loading" class="hidden">Sending...</span>
              </button>
            </div>

            <!-- Success/Error Messages -->
            <div id="form-messages" class="hidden" role="alert" aria-live="assertive" aria-atomic="true">
              <div id="success-message" class="hidden bg-emerald-50 border border-emerald-200 text-emerald-700 px-4 py-3 rounded-lg">
                <p class="font-semibold">Message sent successfully!</p>
                <p class="text-sm">We'll respond to your inquiry within 1-2 business days.</p>
              </div>
              <div id="error-message" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                <p class="font-semibold">Unable to send message.</p>
                <p class="text-sm">Please try again or contact us directly via phone.</p>
              </div>
            </div>
          </form>
        </div>

        <!-- Contact Info & Booking -->
        <div class="space-y-6">

          <!-- Location -->
          <div class="bg-white border border-emerald-100 rounded-2xl p-6 shadow-sm card-hover">
            <h3 class="text-xl font-serif font-bold text-emerald-950 mb-4">Visit Us</h3>
            <div class="flex items-start mb-4">
              <svg class="w-5 h-5 text-emerald-700 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              <div>
                <p class="font-semibold text-gray-800">Optimal Wellbeing Clinic</p>
                <p class="text-gray-600">1378 Bedford Highway</p>
                <p class="text-gray-600">Bedford, NS B4A 1E2</p>
              </div>
            </div>
            <div class="flex items-start mb-4">
              <svg class="w-5 h-5 text-emerald-700 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
              </svg>
              <div>
                <a href="tel:+19024064424" class="font-semibold text-emerald-800 hover:text-emerald-900 transition-colors">(902) 406-4424</a>
              </div>
            </div>
            <div class="rounded-lg overflow-hidden mb-4">
              <iframe
                src="https://maps.google.com/maps?q=1378+Bedford+Highway,+Bedford,+NS+B4A+1E2,+Canada&output=embed"
                width="100%"
                height="200"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                title="Map to Optimal Wellbeing Clinic"
                class="w-full">
              </iframe>
            </div>
            <a
              href="https://www.google.com/maps/dir/?api=1&destination=1378+Bedford+Highway,Bedford,NS,Canada"
              target="_blank"
              rel="noopener noreferrer"
              class="text-emerald-700 hover:text-emerald-800 font-medium inline-flex items-center transition-colors"
            >
              Get Directions
              <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
              </svg>
            </a>
          </div>

          <!-- Hours -->
          <div class="bg-white border border-emerald-100 rounded-2xl p-6 shadow-sm card-hover">
            <h3 class="text-xl font-serif font-bold text-emerald-950 mb-4">Hours</h3>
            <div class="flex items-start">
              <svg class="w-5 h-5 text-emerald-700 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <div class="space-y-1 text-gray-600">
                <p><span class="font-medium text-gray-800">Mon - Fri:</span> 7:30 AM - 3:30 PM</p>
                <p><span class="font-medium text-gray-800">Sat, Sun:</span> Closed</p>
              </div>
            </div>
          </div>

          <!-- Book Online -->
          <div class="bg-emerald-50/50 border border-emerald-100 rounded-2xl p-6 shadow-sm card-hover">
            <h3 class="text-xl font-serif font-bold text-emerald-950 mb-3">Book Online</h3>
            <p class="text-gray-600 mb-4">
              Ready to schedule? Our online booking system is the fastest way to secure your appointment with Dr. MacLeod.
            </p>
            <BookingButton variant="secondary" size="lg" source="contact" />
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-16 bg-gray-50">
    <div class="section-shell">
      <div class="text-center mb-12">
        <h2 class="text-3xl sm:text-4xl font-serif font-bold text-emerald-950 mb-4">Frequently Asked Questions</h2>
        <p class="text-lg text-gray-600">Common questions about naturopathic consultations and treatments</p>
      </div>

      <FAQAccordion items={[
        { question: "What should I expect in my first consultation?", answer: "<p>Your first appointment is comprehensive, typically lasting 60 minutes. Dr. MacLeod will review your health history, current concerns, lifestyle factors and may recommend laboratory testing. This thorough assessment helps create a personalized treatment plan.</p>" },
        { question: "Is naturopathic medicine covered by insurance?", answer: "<p>Yes, most extended health insurance plans cover naturopathic visits. We offer direct billing for many major insurers to make the process convenient for you.</p>" },
        { question: "How long will it take to see results?", answer: "<p>Treatment response varies by individual and condition. Some patients notice improvements within days (especially with IV therapy), while chronic conditions may require several weeks to months. Dr. MacLeod monitors progress closely and adjusts treatments as needed.</p>" },
        { question: "Can I combine naturopathic treatment with conventional medicine?", answer: "<p>Absolutely. Dr. MacLeod works collaboratively with your existing healthcare team. Naturopathic treatments often complement conventional approaches effectively. We always consider medication interactions and communicate with your other healthcare providers when appropriate.</p>" },
      ]} />
    </div>
  </section>
</BaseLayout>

<script>
  // Form submission handling
  function initContactPage() {
    const form = document.getElementById('contact-form') as HTMLFormElement | null;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement | null;
    const submitText = document.getElementById('submit-text');
    const submitLoading = document.getElementById('submit-loading');
    const formMessages = document.getElementById('form-messages');
    const successMessage = document.getElementById('success-message');
    const errorMessage = document.getElementById('error-message');

    // Form submission
    if (!form || !submitBtn || !submitText || !submitLoading || !formMessages || !successMessage || !errorMessage) return;

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      // Show loading state
      submitBtn.disabled = true;
      submitText.classList.add('hidden');
      submitLoading.classList.remove('hidden');
      formMessages.classList.add('hidden');
      successMessage.classList.add('hidden');
      errorMessage.classList.add('hidden');

      // Get form data
      const formData = new FormData(form);

      fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Success
          formMessages.classList.remove('hidden');
          successMessage.classList.remove('hidden');
          form.reset();
        } else {
          throw new Error(data.message || 'Submission failed');
        }
      })
      .catch(error => {
        // Error
        console.error('Form submission error:', error);
        formMessages.classList.remove('hidden');
        errorMessage.classList.remove('hidden');
      })
      .finally(() => {
        // Reset button state
        submitBtn.disabled = false;
        submitText.classList.remove('hidden');
        submitLoading.classList.add('hidden');
      });
    });
  }

  document.addEventListener('astro:page-load', initContactPage);
</script>


---
import BaseLayout from '../layouts/BaseLayout.astro';
import BookingButton from '../components/BookingButton.astro';
import { Phone, FlaskConical, ChevronRight, Syringe, ArrowRight, ChevronDown, Microscope, HeartPulse, BookOpen } from '@lucide/astro';

// Services (top 3 for nav hub)
const services = [
  { title: 'IV Therapy', href: '/iv-therapy' },
  { title: 'Blood Testing', href: '/lab-testing' },
  { title: 'Prolotherapy', href: '/prolotherapy' },
];

// Conditions (top 3 for nav hub)
const conditions = [
  { title: 'Low Back Pain', href: '/low-back-pain' },
  { title: 'Osteoarthritis', href: '/osteoarthritis' },
  { title: 'Fibromyalgia', href: '/fibromyalgia' },
];

// Articles (top 3 for nav hub - short titles to fit on one line)
const articles = [
  { title: 'Better Sleep', href: '/articles/sleep-optimization-evidence-based-strategies' },
  { title: 'Gut Health', href: '/articles/digestive-health-natural-approaches' },
  { title: 'Anxiety', href: '/articles/natural-anxiety-management' },
];

// Blood Tests (top 3 for nav hub)
const bloodTests = [
  { title: 'Thyroid Panel', href: '/thyroid-testing' },
  { title: 'Hormone Panel', href: '/hormone-testing' },
  { title: 'Vitamin D', href: '/nutrient-testing' },
];

// All services for Services section
const allServices = [
  { title: 'Laboratory Testing', description: 'Identify nutrient deficiencies, hormone imbalances and inflammation sources.', img: '/images/reference/services/lab-testing.jpeg', href: '/lab-testing' },
  { title: 'IV Therapy', description: 'Increase energy levels, boost immune function and build resiliency.', img: '/images/treatments/iv-patient-woman.webp', href: '/iv-therapy' },
  { title: 'Prolotherapy', description: 'Relieve joint pain, accelerate tendon healing and strengthen ligaments.', img: '/images/treatments/prolotherapy-knee-injection.png', href: '/prolotherapy' },
];

// FAQ data for schema markup
const faqItems = [
  {
    question: "Can naturopathic doctors order blood tests?",
    answer: "Yes. As a naturopathic doctor, Dr. MacLeod can order a comprehensive range of blood and laboratory tests through private labs. This includes thyroid panels, hormone levels, nutrient status, inflammatory markers, and more. Private testing often means broader panels and faster turnaround compared to the public system, giving us a clear picture of your health."
  },
  {
    question: "Is naturopathic medicine covered by insurance?",
    answer: "Yes, most extended health insurance plans cover naturopathic visits. We offer direct billing for many major insurers to make the process convenient for you."
  },
  {
    question: "Do you work alongside my family doctor?",
    answer: "Absolutely. Naturopathic medicine is most effective as part of a coordinated care approach. I regularly share findings and treatment summaries with family doctors and specialists when patients consent. While naturopathic doctors don't have direct referral privileges in Nova Scotia, I actively communicate with other healthcare providers to help facilitate appropriate referrals where needed."
  }
];

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqItems.map(item => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer
    }
  }))
};
---

<BaseLayout
  title="Home"
  description="Dr. Colin MacLeod ND in Halifax, NS. Evidence-based naturopathic medicine, IV therapy, prolotherapy, acupuncture, nutrition."
  focusKeyword="Dr. Colin MacLeod ND, Halifax naturopathic doctor, IV therapy, prolotherapy, acupuncture"
  image="/images/reference/home-background.webp"
>
  <!-- Hero (V2 style with circular portrait) -->
  <section class="hero-gradient -mt-24 pt-24 relative overflow-hidden">
    <!-- Ambient background shapes -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
      <div class="absolute -top-32 -right-32 w-96 h-96 bg-emerald-800/20 rounded-full blur-3xl"></div>
      <div class="absolute top-1/2 -left-24 w-64 h-64 bg-emerald-700/15 rounded-full blur-2xl"></div>
      <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-emerald-600/10 rounded-full blur-3xl"></div>
    </div>

    <div class="section-shell py-20 lg:py-24 relative z-10">
      <div class="grid lg:grid-cols-2 gap-10 lg:gap-16 items-center">
        <!-- Left Column: Text + Cards -->
        <div class="space-y-8">
          <!-- Mobile Hero Image (circular) -->
          <div class="lg:hidden flex justify-center animate-fade-in-up">
            <div class="relative group">
              <a href="/about" aria-label="About Dr. Colin MacLeod ND" class="block w-36 h-36 rounded-full overflow-hidden border-4 border-white/20 shadow-2xl shadow-black/30 hover:border-white/40 hover:shadow-black/50 transition-all duration-300">
                <picture>
                  <source srcset="/images/general/colin-hero.avif" type="image/avif" />
                  <source srcset="/images/general/colin-hero.webp" type="image/webp" />
                  <img
                    src="/images/general/Dr-colin-macleod-ND.jpeg"
                    alt="Dr. Colin MacLeod ND"
                    class="w-full h-full object-cover object-top"
                    loading="eager"
                  />
                </picture>
              </a>
              <span class="pointer-events-none absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap rounded-full bg-emerald-950/90 px-3 py-1 text-xs font-medium text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200">About Dr. MacLeod</span>
            </div>
          </div>

          <!-- Text Content -->
          <div class="space-y-5 text-center lg:text-left">
            <!-- Trust Badge -->
            <p class="text-emerald-300 uppercase tracking-[0.2em] text-xs sm:text-sm font-medium animate-fade-in-up">
              Halifax Naturopathic Doctor
            </p>

            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold font-serif leading-[1.05] tracking-tight text-white animate-fade-in-up animate-delay-100">
              Dr. Colin MacLeod <span class="text-emerald-300">ND</span>
            </h1>

            <!-- Benefit-focused tagline -->
            <p class="text-lg sm:text-xl text-white/95 max-w-lg leading-relaxed mx-auto lg:mx-0 animate-fade-in-up animate-delay-200">
              Find the <strong class="font-semibold text-emerald-300">root cause</strong>. Restore your health <strong class="font-semibold text-emerald-300">naturally</strong>.
            </p>

            <!-- Credentials line -->
            <p class="text-sm text-emerald-200/80 animate-fade-in-up animate-delay-300">
              CCNM Graduate &bull; Licensed in Nova Scotia &bull; 15 Years Experience
            </p>
          </div>

          <!-- Primary CTA - Positioned prominently -->
          <div class="flex flex-col sm:flex-row items-center gap-4 justify-center lg:justify-start animate-fade-in-up animate-delay-400">
            <BookingButton text="Book Online" variant="hero" size="lg" source="hero" />
            <a href="tel:+19024064424" class="inline-flex items-center gap-2 text-emerald-200 hover:text-white transition-colors font-medium">
              <Phone class="w-5 h-5" aria-hidden="true" />
              (902) 406-4424
            </a>
          </div>

          <!-- Featured Services - Simplified Badges -->
          <div class="flex flex-wrap items-center justify-center lg:justify-start gap-3 animate-fade-in-up animate-delay-500">
            <a
              href="/lab-testing"
              class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-white/20 bg-white/5 backdrop-blur-sm text-white text-sm font-medium hover:bg-white/10 hover:border-white/30 transition-all group"
            >
              <FlaskConical class="w-4 h-4 text-emerald-300" aria-hidden="true" />
              Private Blood Testing
              <ChevronRight class="w-3.5 h-3.5 text-emerald-400 group-hover:translate-x-0.5 transition-transform" aria-hidden="true" />
            </a>
            <a
              href="/iv-therapy"
              class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-white/20 bg-white/5 backdrop-blur-sm text-white text-sm font-medium hover:bg-white/10 hover:border-white/30 transition-all group"
            >
              <Syringe class="w-4 h-4 text-emerald-300" aria-hidden="true" />
              IV Therapy
              <ChevronRight class="w-3.5 h-3.5 text-emerald-400 group-hover:translate-x-0.5 transition-transform" aria-hidden="true" />
            </a>
          </div>

        </div>

        <!-- Right Column: Hero Image (Circular) -->
        <div class="relative hidden lg:flex justify-center items-start">
          <div class="relative group">
            <a href="/about" aria-label="About Dr. Colin MacLeod ND" class="block w-80 h-80 xl:w-96 xl:h-96 rounded-full overflow-hidden shadow-2xl shadow-black/30 border-4 border-white/20 hover:border-white/40 hover:shadow-black/50 hover:scale-[1.02] transition-all duration-300">
              <picture>
                <source srcset="/images/general/colin-hero.avif" type="image/avif" />
                <source srcset="/images/general/colin-hero.webp" type="image/webp" />
                <img
                  src="/images/general/Dr-colin-macleod-ND.jpeg"
                  alt="Dr. Colin MacLeod ND"
                  class="w-full h-full object-cover object-top"
                  loading="eager"
                />
              </picture>
            </a>
            <span class="pointer-events-none absolute -bottom-10 left-1/2 -translate-x-1/2 whitespace-nowrap rounded-full bg-emerald-950/90 px-4 py-1.5 text-sm font-medium text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200">About Dr. MacLeod</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Grid -->
  <section class="py-12 sm:py-16 lg:py-20 bg-white">
    <div class="section-shell">
      <div class="text-center max-w-3xl mx-auto mb-8 sm:mb-16 space-y-4 reveal">
        <h2 class="text-4xl sm:text-5xl font-serif font-medium text-emerald-950 tracking-tight">Services</h2>
      </div>

      <!-- Mobile: Link list -->
      <div class="sm:hidden space-y-1 reveal reveal-delay-100 mb-10">
        {allServices.map((item) => (
          <a href={item.href} class="flex items-center gap-3 py-4 text-gray-700 hover:text-emerald-700 font-medium transition-colors group border-b border-stone-200">
            <ChevronRight class="w-4 h-4 text-emerald-500 flex-shrink-0 group-hover:translate-x-0.5 transition-transform duration-200" aria-hidden="true" />
            {item.title}
          </a>
        ))}
      </div>

      <!-- Desktop: Card grid -->
      <div class="hidden sm:grid gap-8 sm:gap-10 md:grid-cols-2 lg:grid-cols-3 reveal reveal-delay-100">
        {allServices.map((item) => (
          <a href={item.href} class="group block overflow-hidden rounded-3xl bg-white shadow-xl shadow-emerald-900/5 hover:shadow-2xl hover:shadow-emerald-900/10 hover:-translate-y-1 transition-all duration-300 flex flex-col h-full focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2">
            <div class="aspect-[4/3] overflow-hidden">
              <img src={item.img} alt={item.title} class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500" width="800" height="600" loading="lazy" />
            </div>
            <div class="p-8 space-y-4 flex-1 flex flex-col">
              <h3 class="text-2xl font-serif font-medium text-emerald-950 leading-tight group-hover:text-emerald-700 transition-colors">{item.title}</h3>
              <p class="text-base text-slate-600 leading-relaxed flex-1 font-light">{item.description}</p>
            </div>
          </a>
        ))}
      </div>

      <div class="text-center mt-10 sm:mt-16">
        <a
          href="/services"
          class="inline-flex items-center bg-emerald-900 text-white px-10 py-4 rounded-full text-base font-medium tracking-wide hover:bg-emerald-800 hover:-translate-y-0.5 transition-all duration-200 shadow-lg shadow-emerald-900/20 hover:shadow-xl hover:shadow-emerald-900/25"
        >
          View All Services
        </a>
      </div>
    </div>
  </section>

  <!-- Navigation Hub -->
  <section class="py-10 lg:py-14 bg-emerald-50">
    <div class="section-shell">
      <div class="text-center max-w-3xl mx-auto mb-6 sm:mb-8 space-y-3 reveal">
        <h2 class="text-4xl sm:text-5xl font-serif font-medium text-emerald-950">Learn more</h2>
        <p class="text-lg text-slate-600 max-w-2xl mx-auto">Evidence-based information on conditions, treatments and natural health.</p>
      </div>

      <div class="space-y-4 reveal">

        <!-- Card 1: Blood Tests -->
        <div class="bg-white rounded-2xl shadow-sm ring-1 ring-emerald-200 overflow-hidden hover:shadow-md transition-shadow duration-300">
          <!-- Card header row -->
          <div class="flex items-center justify-between px-5 pt-5 pb-3 lg:px-7 lg:pt-6 lg:pb-4">
            <a href="/lab-testing" class="group flex items-center gap-3 min-w-0">
              <span class="flex-shrink-0 flex items-center justify-center w-9 h-9 rounded-xl bg-emerald-100 text-emerald-700 group-hover:bg-emerald-200 transition-colors">
                <Microscope class="w-5 h-5" stroke-width={1.75} aria-hidden="true" />
              </span>
              <span class="text-xl lg:text-2xl font-serif font-semibold text-emerald-900 tracking-tight group-hover:text-emerald-700 transition-colors">Blood Tests</span>
              <ChevronRight class="w-4 h-4 text-emerald-400 flex-shrink-0 group-hover:text-emerald-600 group-hover:translate-x-0.5 transition-all" aria-hidden="true" />
            </a>
            <a href="/lab-testing" class="hidden lg:inline-flex items-center gap-1.5 text-sm font-medium text-emerald-700 hover:text-emerald-900 transition-colors flex-shrink-0 ml-4">
              See all
              <ArrowRight class="w-3.5 h-3.5" aria-hidden="true" />
            </a>
          </div>
          <!-- Item links -->
          <div class="flex flex-col lg:flex-row lg:items-center border-t border-emerald-100 divide-y divide-emerald-100 lg:divide-y-0 lg:divide-x lg:divide-emerald-100">
            {bloodTests.map((test) => (
              <a href={test.href} class="group flex items-center gap-2 px-5 py-3 lg:px-7 lg:py-3 text-base text-emerald-950 hover:text-emerald-700 hover:bg-emerald-50/60 transition-all flex-1">
                <ChevronRight class="w-4 h-4 text-emerald-300 flex-shrink-0 group-hover:text-emerald-500 group-hover:translate-x-0.5 transition-all" aria-hidden="true" />
                {test.title}
              </a>
            ))}
            <a href="/lab-testing" class="lg:hidden group flex items-center gap-2 px-5 py-3 text-sm font-medium text-emerald-700 hover:text-emerald-900 hover:bg-emerald-50/60 transition-all">
              <ArrowRight class="w-4 h-4 flex-shrink-0" aria-hidden="true" />
              See all blood tests
            </a>
          </div>
        </div>

        <!-- Card 2: Conditions -->
        <div class="bg-white rounded-2xl shadow-sm ring-1 ring-emerald-200 overflow-hidden hover:shadow-md transition-shadow duration-300">
          <div class="flex items-center justify-between px-5 pt-5 pb-3 lg:px-7 lg:pt-6 lg:pb-4">
            <a href="/conditions" class="group flex items-center gap-3 min-w-0">
              <span class="flex-shrink-0 flex items-center justify-center w-9 h-9 rounded-xl bg-emerald-100 text-emerald-800 group-hover:bg-emerald-200 transition-colors">
                <HeartPulse class="w-5 h-5" stroke-width={1.75} aria-hidden="true" />
              </span>
              <span class="text-xl lg:text-2xl font-serif font-semibold text-emerald-900 tracking-tight group-hover:text-emerald-700 transition-colors">Conditions</span>
              <ChevronRight class="w-4 h-4 text-emerald-400 flex-shrink-0 group-hover:text-emerald-600 group-hover:translate-x-0.5 transition-all" aria-hidden="true" />
            </a>
            <a href="/conditions" class="hidden lg:inline-flex items-center gap-1.5 text-sm font-medium text-emerald-700 hover:text-emerald-900 transition-colors flex-shrink-0 ml-4">
              See all
              <ArrowRight class="w-3.5 h-3.5" aria-hidden="true" />
            </a>
          </div>
          <div class="flex flex-col lg:flex-row lg:items-center border-t border-emerald-100 divide-y divide-emerald-100 lg:divide-y-0 lg:divide-x lg:divide-emerald-100">
            {conditions.map((condition) => (
              <a href={condition.href} class="group flex items-center gap-2 px-5 py-3 lg:px-7 lg:py-3 text-base text-emerald-950 hover:text-emerald-700 hover:bg-emerald-50/60 transition-all flex-1">
                <ChevronRight class="w-4 h-4 text-emerald-300 flex-shrink-0 group-hover:text-emerald-500 group-hover:translate-x-0.5 transition-all" aria-hidden="true" />
                {condition.title}
              </a>
            ))}
            <a href="/conditions" class="lg:hidden group flex items-center gap-2 px-5 py-3 text-sm font-medium text-emerald-700 hover:text-emerald-900 hover:bg-emerald-50/60 transition-all">
              <ArrowRight class="w-4 h-4 flex-shrink-0" aria-hidden="true" />
              See all conditions
            </a>
          </div>
        </div>

        <!-- Card 3: Articles -->
        <div class="bg-white rounded-2xl shadow-sm ring-1 ring-emerald-200 overflow-hidden hover:shadow-md transition-shadow duration-300">
          <div class="flex items-center justify-between px-5 pt-5 pb-3 lg:px-7 lg:pt-6 lg:pb-4">
            <a href="/articles" class="group flex items-center gap-3 min-w-0">
              <span class="flex-shrink-0 flex items-center justify-center w-9 h-9 rounded-xl bg-emerald-100 text-emerald-900 group-hover:bg-emerald-200 transition-colors">
                <BookOpen class="w-5 h-5" stroke-width={1.75} aria-hidden="true" />
              </span>
              <span class="text-xl lg:text-2xl font-serif font-semibold text-emerald-900 tracking-tight group-hover:text-emerald-700 transition-colors">Articles</span>
              <ChevronRight class="w-4 h-4 text-emerald-400 flex-shrink-0 group-hover:text-emerald-600 group-hover:translate-x-0.5 transition-all" aria-hidden="true" />
            </a>
            <a href="/articles" class="hidden lg:inline-flex items-center gap-1.5 text-sm font-medium text-emerald-700 hover:text-emerald-900 transition-colors flex-shrink-0 ml-4">
              See all
              <ArrowRight class="w-3.5 h-3.5" aria-hidden="true" />
            </a>
          </div>
          <div class="flex flex-col lg:flex-row lg:items-center border-t border-emerald-100 divide-y divide-emerald-100 lg:divide-y-0 lg:divide-x lg:divide-emerald-100">
            {articles.map((article) => (
              <a href={article.href} class="group flex items-center gap-2 px-5 py-3 lg:px-7 lg:py-3 text-base text-emerald-950 hover:text-emerald-700 hover:bg-emerald-50/60 transition-all flex-1">
                <ChevronRight class="w-4 h-4 text-emerald-300 flex-shrink-0 group-hover:text-emerald-500 group-hover:translate-x-0.5 transition-all" aria-hidden="true" />
                {article.title}
              </a>
            ))}
            <a href="/articles" class="lg:hidden group flex items-center gap-2 px-5 py-3 text-sm font-medium text-emerald-700 hover:text-emerald-900 hover:bg-emerald-50/60 transition-all">
              <ArrowRight class="w-4 h-4 flex-shrink-0" aria-hidden="true" />
              See all articles
            </a>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- FAQ (from current homepage) -->
  <section class="py-16 lg:py-20 bg-white">
    <div class="section-shell">
      <div class="text-center max-w-3xl mx-auto mb-8 sm:mb-10 space-y-3 reveal">
        <h2 class="text-4xl sm:text-5xl font-serif font-medium text-emerald-950">Common Questions</h2>
        <p class="text-lg text-slate-600 max-w-2xl mx-auto">Answers to what patients most commonly ask before their first visit.</p>
      </div>
      <div class="max-w-3xl mx-auto space-y-6 reveal reveal-delay-100">
            <details class="group bg-white rounded-2xl shadow-sm border border-emerald-100/50 overflow-hidden transition-all duration-300 hover:shadow-md open:shadow-lg open:ring-1 open:ring-emerald-500/20">
              <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
                <h3 class="text-xl font-medium text-emerald-950 pr-8">Can naturopathic doctors order blood tests?</h3>
                <span class="text-emerald-500 transition-transform duration-300 group-open:rotate-180">
                  <ChevronDown class="w-6 h-6" aria-hidden="true" />
                </span>
              </summary>
              <div class="px-6 pb-6 text-base text-slate-600 leading-relaxed">
                Yes. As a naturopathic doctor, Dr. MacLeod can order a comprehensive range of blood and laboratory tests through private labs. This includes thyroid panels, hormone levels, nutrient status, inflammatory markers, and more. Private testing often means broader panels and faster turnaround compared to the public system, giving us a clear picture of your health.
              </div>
            </details>
            <details class="group bg-white rounded-2xl shadow-sm border border-emerald-100/50 overflow-hidden transition-all duration-300 hover:shadow-md open:shadow-lg open:ring-1 open:ring-emerald-500/20">
              <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
                <h3 class="text-xl font-medium text-emerald-950 pr-8">Is naturopathic medicine covered by insurance?</h3>
                <span class="text-emerald-500 transition-transform duration-300 group-open:rotate-180">
                  <ChevronDown class="w-6 h-6" aria-hidden="true" />
                </span>
              </summary>
              <div class="px-6 pb-6 text-base text-slate-600 leading-relaxed">
                Yes, most extended health insurance plans cover naturopathic visits. We offer direct billing for many major insurers to make the process convenient for you.
              </div>
            </details>
            <details class="group bg-white rounded-2xl shadow-sm border border-emerald-100/50 overflow-hidden transition-all duration-300 hover:shadow-md open:shadow-lg open:ring-1 open:ring-emerald-500/20">
              <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
                <h3 class="text-xl font-medium text-emerald-950 pr-8">Do you work alongside my family doctor?</h3>
                <span class="text-emerald-500 transition-transform duration-300 group-open:rotate-180">
                  <ChevronDown class="w-6 h-6" aria-hidden="true" />
                </span>
              </summary>
              <div class="px-6 pb-6 text-base text-slate-600 leading-relaxed">
                Absolutely. Naturopathic medicine is most effective as part of a coordinated care approach. I regularly share findings and treatment summaries with family doctors and specialists when patients consent. While naturopathic doctors don't have direct referral privileges in Nova Scotia, I actively communicate with other healthcare providers to help facilitate appropriate referrals where needed.
              </div>
            </details>
      </div>
    </div>
  </section>

  <!-- Closing CTA -->
  <section class="py-20 lg:py-24 bg-emerald-900">
    <div class="section-shell text-center space-y-6 reveal">
      <h2 class="text-3xl sm:text-4xl font-serif font-medium text-white">Ready to take the first step?</h2>
      <p class="text-emerald-200 text-lg max-w-xl mx-auto">Book a consultation and start your journey to better health.</p>
      <div>
        <BookingButton text="Book Online" variant="hero" size="lg" source="bottom-cta" />
      </div>
      <div class="flex flex-wrap justify-center gap-x-4 gap-y-2 text-sm text-emerald-300/80">
        <span>No referral needed</span>
        <span aria-hidden="true">·</span>
        <span>Direct billing available</span>
        <span aria-hidden="true">·</span>
        <span>Currently accepting new patients</span>
      </div>
    </div>
  </section>

  <!-- FAQ Schema for AI discoverability -->
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
</BaseLayout>
